import { preferences } from '@kit.ArkData'
import { Context } from '@kit.AbilityKit'

/**
 * è¯­è¨€é€‰é¡¹æ¥å£
 */
export interface LanguageOption {
  code: string
  name: string
  nativeName: string
}

/**
 * å¤šè¯­è¨€å­—å…¸ç±»å‹
 */
type Dictionary = Record<string, string>
type LanguageDictionaries = Record<string, Dictionary>

/**
 * æ¨¡æ¿å‚æ•°ç±»å‹
 */
type TemplateParams = Record<string, string | number>

/**
 * I18næœåŠ¡ç±» - åº”ç”¨å†…å­—å…¸å‹å¤šè¯­è¨€æ”¯æŒ
 * ä¼˜åŠ¿ï¼šç«‹å³ç”Ÿæ•ˆã€è·¨ç‰ˆæœ¬ä¸€è‡´ã€ä¸ä¾èµ–èµ„æºç³»ç»Ÿçƒ­åˆ‡æ¢
 */
export class I18nService {
  private static instance: I18nService
  
  // å½“å‰è¯­è¨€çŠ¶æ€ - å•ä¸€æ•°æ®æº
  private currentLang: string = 'zh'
  
  // è¯­è¨€å­—å…¸
  private dictionaries: LanguageDictionaries = {}
  
  // Preferenceså­˜å‚¨
  private preferences: preferences.Preferences | null = null
  
  // æ”¯æŒçš„è¯­è¨€åˆ—è¡¨
  private supportedLanguages: LanguageOption[] = [
    { code: 'zh-CN', name: 'ç®€ä½“ä¸­æ–‡', nativeName: 'ç®€ä½“ä¸­æ–‡' },
    { code: 'en-US', name: 'English', nativeName: 'English' }
  ]

  private constructor() {
    this.initDictionaries()
  }

  static getInstance(): I18nService {
    if (!I18nService.instance) {
      I18nService.instance = new I18nService()
    }
    return I18nService.instance
  }

  /**
   * åˆå§‹åŒ–å­—å…¸æ•°æ®
   */
  private initDictionaries(): void {
    // ä¸­æ–‡å­—å…¸
    this.dictionaries['zh-CN'] = {
      // åº”ç”¨åŸºç¡€
      'app_name': 'æ‘©æ–¯å¯†ç ',
      'app_tagline': 'è®©å­¦ä¹ æ‘©æ–¯å¯†ç ç®€å•åˆæœ‰è¶£',
      
      // ä¸»å¯¼èˆª
      'learn': 'å­¦ä¹ ',
      'practice': 'ç»ƒä¹ ', 
      'translate': 'ç¿»è¯‘',
      'code_table': 'ç è¡¨',
      'me': 'æˆ‘',
      
      // é€šç”¨æ“ä½œ
      'confirm': 'ç¡®è®¤',
      'cancel': 'å–æ¶ˆ',
      'close': 'å…³é—­',
      'back': 'è¿”å›',
      'next': 'ä¸‹ä¸€æ­¥',
      'loading': 'åŠ è½½ä¸­...',
      'copied': 'å·²å¤åˆ¶åˆ°å‰ªè´´æ¿',
      'got_it': 'çŸ¥é“äº†',
      
      // è¯­è¨€è®¾ç½®
      'language': 'è¯­è¨€',
      'language_selection_title': 'é€‰æ‹©è¯­è¨€',
      'language_selection_content': 'é€‰æ‹©æ‚¨åå¥½çš„åº”ç”¨ç•Œé¢è¯­è¨€',
      'chinese': 'ä¸­æ–‡',
      'english': 'English',
      'language_switched': 'è¯­è¨€å·²åˆ‡æ¢ä¸ºä¸­æ–‡',
      'language_switch_failed': 'è¯­è¨€åˆ‡æ¢å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•',
      
      // å­¦ä¹ æ¨¡å—
      'morse_code_basics': 'æ‘©æ–¯å¯†ç åŸºç¡€',
      'alphabet_lesson': 'å­—æ¯',
      'number_lesson': 'æ•°å­—',
      'punctuation_lesson': 'ç¬¦å·',
      'word_lesson': 'å•è¯',
      'review_lesson': 'å¤ä¹ ',
      'lesson_completed': 'å®Œæˆ',
      'next_lesson': 'ä¸‹ä¸€è¯¾',
      'start_test': 'å¼€å§‹æµ‹è¯•',
      'your_score': 'ä½ çš„åˆ†æ•°',
      'congratulations_passed': 'ğŸ‰ æ­å–œé€šè¿‡ï¼',
      'keep_trying': 'ç»§ç»­åŠªåŠ›ï¼',
      
      // ç»ƒä¹ æ¨¡å—
      'easy': 'ç®€å•',
      'medium': 'ä¸­ç­‰', 
      'hard': 'å›°éš¾',
      'easy_desc': 'ä»…å­—æ¯',
      'medium_desc': 'å­—æ¯ + æ•°å­—',
      'hard_desc': 'å…¨éƒ¨å­—ç¬¦',
      'favorites': 'æ”¶è—',
      'mistakes': 'é”™é¢˜æœ¬',
      'practice_again': 'å†æ¬¡ç»ƒä¹ ',
      'practice_count': 'ç»ƒä¹ æ¬¡æ•°',
      'favorite_added': 'å·²æ”¶è—',
      'favorite_removed': 'å·²å–æ¶ˆæ”¶è—',
      'practice_records': 'ç»ƒä¹ è®°å½•',
      'practiced': 'å·²ç»ƒä¹ ',
      'total': 'æ€»è®¡',
      
      // ç¿»è¯‘æ¨¡å—
      'text_to_morse': 'æ–‡æœ¬ â†’ ç”µç ',
      'morse_to_text': 'ç”µç  â†’ æ–‡æœ¬',
      'input_text_placeholder': 'åœ¨æ­¤è¾“å…¥æ–‡æœ¬ï¼Œå¦‚: Hello World',
      'input_morse_placeholder': 'åœ¨æ­¤è¾“å…¥ç”µç ï¼Œå¦‚: Â·Â·Â· --- Â·Â·Â·',
      'output_text_placeholder': 'ç”µç å°†åœ¨æ­¤æ˜¾ç¤º',
      'output_morse_placeholder': 'æ–‡æœ¬å°†åœ¨æ­¤æ˜¾ç¤º',
      
      // ç è¡¨æ¨¡å—
      'standard_chinese_telegraph_code': 'æ ‡å‡†ä¸­æ–‡ç”µç ',
      'chinese_characters': 'æ±‰å­—',
      'telegraph_code': 'ç”µç ',
      'searching': 'æœç´¢ä¸­...',
      'no_data': 'æš‚æ— æ•°æ®',
      
      // ä¸ªäººä¸­å¿ƒ
      'instructions': 'ä½¿ç”¨è¯´æ˜',
      'rating_feedback': 'è¯„åˆ†å’Œåé¦ˆ',
      'share_app': 'åˆ†äº«åº”ç”¨',
      'other_apps': 'å…¶ä»–åº”ç”¨',
      'version': 'ç‰ˆæœ¬',
      'copyright': 'Â© 2025 é‡åº†è±†èŠ±ç§‘æŠ€æœ‰é™å…¬å¸',
      
      // ä½¿ç”¨è¯´æ˜
      'instructions_title': 'ä½¿ç”¨è¯´æ˜',
      'instructions_content': '1. å­¦ä¹ ï¼šä»åŸºç¡€è¯¾ç¨‹å¼€å§‹ï¼Œé€æ­¥æŒæ¡æ‘©æ–¯å¯†ç \n2. ç»ƒä¹ ï¼šé€šè¿‡ä¸åŒéš¾åº¦çš„ç»ƒä¹ å·©å›ºå­¦ä¹ æˆæœ\n3. ç¿»è¯‘ï¼šå°†æ–‡å­—è½¬æ¢ä¸ºæ‘©æ–¯å¯†ç æˆ–åå‘è½¬æ¢\n4. ç è¡¨ï¼šæŸ¥çœ‹å®Œæ•´çš„æ‘©æ–¯å¯†ç å¯¹ç…§è¡¨\n\nç‚¹å‡»æ’­æ”¾æŒ‰é’®å¯ä»¥å¬åˆ°æ‘©æ–¯å¯†ç çš„å£°éŸ³',
      
      // åˆ†äº«å†…å®¹
      'share_text': 'æ¨èä¸€æ¬¾å­¦ä¹ æ‘©å°”æ–¯å¯†ç çš„åº”ç”¨ï¼š\nã€Šæ‘©æ–¯å¯†ç  2025ã€‹ğŸ“¡\n\nâ€¢ ä»é›¶å­¦ä¹ æ‘©å°”æ–¯ç”µç \nâ€¢ è·Ÿè¯»ç»ƒä¹ ä¸å¬åŠ›è®­ç»ƒ\nâ€¢ æ–‡æœ¬ä¸æ‘©æ–¯äº’ç›¸ç¿»è¯‘\n\nç«‹å³ä¸‹è½½ï¼š\nhttps://appgallery.huawei.com/app/detail?id=com.douhua.morsecode',
      'share_copied': 'åˆ†äº«å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿',
      
      // è¯¾ç¨‹æ ‡é¢˜ - æ¯ä¸ªå•å…ƒå†…éƒ¨ç¼–å·
      'lesson_1': 'ç¬¬ 1 è¯¾',
      'lesson_2': 'ç¬¬ 2 è¯¾', 
      'lesson_3': 'ç¬¬ 3 è¯¾',
      'lesson_4': 'ç¬¬ 4 è¯¾',
      'lesson_5': 'ç¬¬ 5 è¯¾',
      'lesson_6': 'ç¬¬ 6 è¯¾',
      'lesson_7': 'ç¬¬ 7 è¯¾',
      'lesson_8': 'ç¬¬ 8 è¯¾',
      'lesson_9': 'ç¬¬ 9 è¯¾',
      'alphabet_abc': 'A B C',
      'alphabet_def': 'D E F',
      'alphabet_ghij': 'G H I J',
      'alphabet_review_aj': 'å¤ä¹ ï¼šA-J',
      'alphabet_klmn': 'K L M N',
      'alphabet_opqr': 'O P Q R',
      'alphabet_stuv': 'S T U V',
      'alphabet_wxyz': 'W X Y Z',
      'alphabet_review_kz': 'å¤ä¹ ï¼šK-Z',
      'numbers_123': '1 2 3',
      'numbers_456': '4 5 6',
      'numbers_7890': '7 8 9 0',
      'numbers_review': 'å¤ä¹ ï¼š0-9',
      'punctuation_basic': '. , ? ! : ;',
      'punctuation_advanced': '= + - _ " \' ( ) / @',
      'punctuation_review': 'å¤ä¹ ',
      'words_3letter': '3å­—æ¯å•è¯',
      'words_4letter': '4å­—æ¯å•è¯',
      'words_5letter': '5å­—æ¯å•è¯',
      'all_codes': 'æ‰€æœ‰ç ',
      'letters': 'å­—æ¯',
      'numbers': 'æ•°å­—',
      'punctuation': 'æ ‡ç‚¹ç¬¦å·',
      'practice_favorites': 'ç»ƒä¹ æ”¶è—çš„å­—æ¯',
      'mistakes_desc': 'å¤ä¹ åšé”™çš„å­—æ¯',
      'favorites_empty': 'æ”¶è—å¤¹ä¸ºç©ºï¼Œå…ˆå»ç»ƒä¹ ä¸€äº›å­—æ¯å§ï¼',
      'mistakes_empty': 'é”™é¢˜æœ¬ä¸ºç©ºï¼Œè¿˜æ²¡æœ‰é”™é¢˜å“¦ï¼',
      // å…¶ä»–åº”ç”¨/å¤–é“¾
      'periodic_table_app': 'æŒä¸Šå…ƒç´ å‘¨æœŸè¡¨',
      // å…¶ä»–é¡µé¢ç”¨åˆ°çš„é”®
      'please_complete_previous_lessons': 'è¯·å…ˆå®Œæˆå‰é¢çš„è¯¾ç¨‹',
      'basics_test': 'åŸºç¡€æµ‹è¯•',
      'chinese_morse_code': 'ä¸­æ–‡æ‘©å°”æ–¯ç”µç ',
      'chinese_code_test': 'ä¸­æ–‡ç”µç æµ‹è¯•'
    }

    // è‹±æ–‡å­—å…¸
    this.dictionaries['en-US'] = {
      // åº”ç”¨åŸºç¡€
      'app_name': 'Morse Code',
      'app_tagline': 'Make learning Morse code simple and fun',
      
      // ä¸»å¯¼èˆª
      'learn': 'Learn',
      'practice': 'Practice',
      'translate': 'Translate', 
      'code_table': 'Code Table',
      'me': 'Me',
      
      // é€šç”¨æ“ä½œ
      'confirm': 'Confirm',
      'cancel': 'Cancel',
      'close': 'Close',
      'back': 'Back',
      'next': 'Next',
      'loading': 'Loading...',
      'copied': 'Copied to clipboard',
      'got_it': 'Got it',
      
      // è¯­è¨€è®¾ç½®
      'language': 'Language',
      'language_selection_title': 'Select Language',
      'language_selection_content': 'Choose your preferred language for the app interface',
      'chinese': 'ä¸­æ–‡',
      'english': 'English',
      'language_switched': 'Language switched to English',
      'language_switch_failed': 'Language switch failed, please try again later',
      
      // å­¦ä¹ æ¨¡å—
      'morse_code_basics': 'Morse Code Basics',
      'alphabet_lesson': 'Alphabet',
      'number_lesson': 'Number',
      'punctuation_lesson': 'Punctuation',
      'word_lesson': 'Word',
      'review_lesson': 'Review',
      'lesson_completed': 'Completed',
      'next_lesson': 'Next Lesson',
      'start_test': 'Start Test',
      'your_score': 'Your Score',
      'congratulations_passed': 'ğŸ‰ Congratulations! You passed!',
      'keep_trying': 'Keep trying!',
      
      // ç»ƒä¹ æ¨¡å—
      'easy': 'Easy',
      'medium': 'Medium',
      'hard': 'Hard',
      'easy_desc': 'Letters Only',
      'medium_desc': 'Letters + Numbers',
      'hard_desc': 'All Characters',
      'favorites': 'Favorites',
      'mistakes': 'Mistakes',
      'practice_again': 'Practice Again',
      'practice_count': 'Practice Count',
      'favorite_added': 'Added to favorites',
      'favorite_removed': 'Removed from favorites',
      'practice_records': 'Practice Records',
      'practiced': 'Practiced',
      'total': 'Total',
      
      // ç¿»è¯‘æ¨¡å—
      'text_to_morse': 'Text â†’ Morse',
      'morse_to_text': 'Morse â†’ Text',
      'input_text_placeholder': 'Enter text here, e.g., Hello World',
      'input_morse_placeholder': 'Enter Morse here, e.g., Â·Â·Â· --- Â·Â·Â·',
      'output_text_placeholder': 'Morse will display here',
      'output_morse_placeholder': 'Text will display here',
      
      // ç è¡¨æ¨¡å—
      'standard_chinese_telegraph_code': 'Standard Chinese Telegraph Code',
      'chinese_characters': 'Chinese Characters',
      'telegraph_code': 'Telegraph Code',
      'searching': 'Searching...',
      'no_data': 'No Data',
      
      // ä¸ªäººä¸­å¿ƒ
      'instructions': 'Instructions',
      'rating_feedback': 'Rating & Feedback',
      'share_app': 'Share App',
      'other_apps': 'Other Apps',
      'version': 'Version',
      'copyright': 'Â© 2025 Douhua Technology Co., Ltd.',
      
      // ä½¿ç”¨è¯´æ˜
      'instructions_title': 'Instructions',
      'instructions_content': '1. Learn: Start with basic courses to master Morse code\n2. Practice: Consolidate learning through different difficulty levels\n3. Translate: Convert text to Morse code or vice versa\n4. Code Table: View the complete Morse code reference table\n\nClick the play button to hear the Morse code sound',
      
      // åˆ†äº«å†…å®¹
      'share_text': 'Recommend a Morse code learning app:\nã€ŠMorse Code 2025ã€‹ğŸ“¡\n\nâ€¢ Learn Morse code from scratch\nâ€¢ Follow-along practice and listening training\nâ€¢ Text and Morse code translation\n\nDownload now:\nhttps://appgallery.huawei.com/app/detail?id=com.douhua.morsecode',
      'share_copied': 'Share content copied to clipboard',
      
      // è¯¾ç¨‹æ ‡é¢˜ - æ¯ä¸ªå•å…ƒå†…éƒ¨ç¼–å·
      'lesson_1': 'Lesson 1',
      'lesson_2': 'Lesson 2',
      'lesson_3': 'Lesson 3', 
      'lesson_4': 'Lesson 4',
      'lesson_5': 'Lesson 5',
      'lesson_6': 'Lesson 6',
      'lesson_7': 'Lesson 7',
      'lesson_8': 'Lesson 8',
      'lesson_9': 'Lesson 9',
      'alphabet_abc': 'A B C',
      'alphabet_def': 'D E F',
      'alphabet_ghij': 'G H I J',
      'alphabet_review_aj': 'Review: A - J',
      'alphabet_klmn': 'K L M N',
      'alphabet_opqr': 'O P Q R',
      'alphabet_stuv': 'S T U V',
      'alphabet_wxyz': 'W X Y Z',
      'alphabet_review_kz': 'Review: K - Z',
      'numbers_123': '1 2 3',
      'numbers_456': '4 5 6',
      'numbers_7890': '7 8 9 0',
      'numbers_review': 'Review: 0-9',
      'punctuation_basic': '. , ? ! : ;',
      'punctuation_advanced': '= + - _ " \' ( ) / @',
      'punctuation_review': 'Review',
      'words_3letter': '3-Letter Words',
      'words_4letter': '4-Letter Words',
      'words_5letter': '5-Letter Words',
      'all_codes': 'All',
      'letters': 'Letters',
      'numbers': 'Numbers',
      'punctuation': 'Punctuation',
      'practice_favorites': 'Practice favorite letters',
      'mistakes_desc': 'Review wrong letters',
      'favorites_empty': 'Favorites is empty, go practice some letters first!',
      'mistakes_empty': 'No mistakes yet!',
      // Other apps / external links
      'periodic_table_app': 'Periodic Table',
      // Keys used by pages
      'please_complete_previous_lessons': 'Please complete the previous lessons first',
      'basics_test': 'Basics Test',
      'chinese_morse_code': 'Chinese Morse Code',
      'chinese_code_test': 'Chinese Code Test'
    }
  }

  /**
   * åˆå§‹åŒ–I18næœåŠ¡
   * @param context åº”ç”¨ä¸Šä¸‹æ–‡
   */
  async init(context: Context): Promise<void> {
    try {
      // åˆå§‹åŒ–Preferences
      this.preferences = await preferences.getPreferences(context, 'i18n_settings')
      
      // è¯»å–ä¿å­˜çš„è¯­è¨€è®¾ç½®
      const savedLang = await this.preferences.get('current_language', 'zh-CN') as string
      
      // éªŒè¯è¯­è¨€ä»£ç æœ‰æ•ˆæ€§
      if (this.isLanguageSupported(savedLang)) {
        this.currentLang = savedLang
      } else {
        // å°è¯•ä»ç³»ç»Ÿè¯­è¨€æ¨æ–­
        this.currentLang = this.detectSystemLanguage()
      }
      
      // è®¾ç½®åˆ°AppStorageï¼Œä¾›å…¨å±€è®¿é—®
      AppStorage.setOrCreate('currentLanguage', this.currentLang)
      
      console.log('[I18nService] Initialized with language:', this.currentLang)
    } catch (error) {
      console.error('[I18nService] Failed to initialize:', error)
      // é»˜è®¤ä¸­æ–‡
      this.currentLang = 'zh-CN'
      AppStorage.setOrCreate('currentLanguage', this.currentLang)
    }
  }

  /**
   * è·å–ç¿»è¯‘æ–‡æœ¬
   * @param key ç¿»è¯‘é”®
   * @param params æ¨¡æ¿å‚æ•°ï¼ˆå¯é€‰ï¼‰
   * @returns ç¿»è¯‘åçš„æ–‡æœ¬
   */
  t(key: string, params?: TemplateParams): string {
    const dictionary = this.dictionaries[this.currentLang]
    if (!dictionary) {
      console.warn(`[I18nService] Dictionary not found for language: ${this.currentLang}`)
      return key
    }

    let text = dictionary[key]
    if (!text) {
      console.warn(`[I18nService] Translation key not found: ${key}`)
      return key
    }

    // å¤„ç†æ¨¡æ¿å‚æ•°
    if (params) {
      Object.keys(params).forEach(paramKey => {
        const placeholder = `{${paramKey}}`
        text = text.replace(new RegExp(placeholder, 'g'), String(params[paramKey]))
      })
    }

    return text
  }

  /**
   * åˆ‡æ¢è¯­è¨€
   * @param languageCode ç›®æ ‡è¯­è¨€ä»£ç 
   */
  async setLanguage(languageCode: string): Promise<void> {
    try {
      if (!this.isLanguageSupported(languageCode)) {
        console.error(`Unsupported language: ${languageCode}`)
        return
      }

      if (languageCode === this.currentLang) {
        return // è¯­è¨€ç›¸åŒï¼Œæ— éœ€åˆ‡æ¢
      }

      // æ›´æ–°å½“å‰è¯­è¨€
      this.currentLang = languageCode
      
      // æ›´æ–°AppStorageï¼Œè§¦å‘UIé‡æ–°æ¸²æŸ“
      AppStorage.setOrCreate('currentLanguage', this.currentLang)
      
      // å¼‚æ­¥ä¿å­˜åˆ°Preferences
      if (this.preferences) {
        await this.preferences.put('current_language', languageCode)
        await this.preferences.flush()
      }
      
      console.log('[I18nService] Language switched to:', languageCode)
    } catch (error) {
      console.error('[I18nService] Failed to switch language:', error)
    }
  }

  /**
   * è·å–å½“å‰è¯­è¨€
   * @returns å½“å‰è¯­è¨€ä»£ç 
   */
  getCurrentLanguage(): string {
    return this.currentLang
  }

  /**
   * è·å–æ”¯æŒçš„è¯­è¨€åˆ—è¡¨
   * @returns æ”¯æŒçš„è¯­è¨€é€‰é¡¹æ•°ç»„
   */
  getSupportedLanguages(): LanguageOption[] {
    return [...this.supportedLanguages]
  }

  /**
   * åˆ¤æ–­æ˜¯å¦ä¸ºä¸­æ–‡
   * @returns æ˜¯å¦ä¸ºä¸­æ–‡
   */
  isChinese(): boolean {
    return this.currentLang.startsWith('zh')
  }

  /**
   * åˆ¤æ–­æ˜¯å¦ä¸ºè‹±æ–‡
   * @returns æ˜¯å¦ä¸ºè‹±æ–‡
   */
  isEnglish(): boolean {
    return this.currentLang.startsWith('en')
  }

  /**
   * æ£€æŸ¥è¯­è¨€æ˜¯å¦æ”¯æŒ
   * @param languageCode è¯­è¨€ä»£ç 
   * @returns æ˜¯å¦æ”¯æŒ
   */
  private isLanguageSupported(languageCode: string): boolean {
    return this.supportedLanguages.some(lang => lang.code === languageCode)
  }

  /**
   * æ£€æµ‹ç³»ç»Ÿè¯­è¨€
   * @returns ç³»ç»Ÿè¯­è¨€ä»£ç 
   */
  private detectSystemLanguage(): string {
    // é»˜è®¤è¿”å›ä¸­æ–‡
    return 'zh-CN'
  }

  /**
   * æ·»åŠ æˆ–æ›´æ–°å­—å…¸æ¡ç›®
   * @param languageCode è¯­è¨€ä»£ç 
   * @param key ç¿»è¯‘é”®
   * @param value ç¿»è¯‘å€¼
   */
  addTranslation(languageCode: string, key: string, value: string): void {
    if (!this.dictionaries[languageCode]) {
      this.dictionaries[languageCode] = {}
    }
    this.dictionaries[languageCode][key] = value
  }

  /**
   * æ‰¹é‡æ·»åŠ ç¿»è¯‘
   * @param languageCode è¯­è¨€ä»£ç 
   * @param translations ç¿»è¯‘å¯¹è±¡
   */
  addTranslations(languageCode: string, translations: Dictionary): void {
    if (!this.dictionaries[languageCode]) {
      this.dictionaries[languageCode] = {}
    }
    // æ‰‹åŠ¨åˆå¹¶å¯¹è±¡å±æ€§ï¼Œé¿å…ä½¿ç”¨ Object.assign å’Œ for...in
    const keys = Object.keys(translations)
    for (let i = 0; i < keys.length; i++) {
      const key = keys[i]
      this.dictionaries[languageCode][key] = translations[key]
    }
  }
}

// å¯¼å‡ºå•ä¾‹å®ä¾‹
export const i18nService = I18nService.getInstance()

// å¯¼å‡ºå…¨å±€ç¿»è¯‘å‡½æ•°ï¼Œæ–¹ä¾¿ä½¿ç”¨
export const t = (key: string, params?: TemplateParams): string => {
  return i18nService.t(key, params)
}
